{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewscott/Projects/jobtrack/lib/parser.ts"],"sourcesContent":["// LinkedIn paste parser - converts relative dates to absolute dates\n\nexport interface ParsedApplication {\n  company: string\n  position: string\n  location?: string\n  dateApplied: string // ISO format\n  source: string\n}\n\nexport function parseLinkedInPaste(rawText: string): ParsedApplication[] {\n  const lines = rawText.split('\\n').filter(line => line.trim())\n  const applications: ParsedApplication[] = []\n\n  for (const line of lines) {\n    // Try to parse in multiple formats\n\n    // Format 1: \"Company - Position - Location - Applied X ago\"\n    // Format 2: \"Company - Position - Applied X ago\"\n    // Format 3: Just \"Company - Position\" (default to today)\n\n    const parts = line.split(' - ').map(p => p.trim())\n    if (parts.length < 2) continue // Need at least company and position\n\n    const company = parts[0]\n    const position = parts[1]\n\n    // Find \"Applied X ago\" part (if exists)\n    const appliedIndex = parts.findIndex(p => p.toLowerCase().includes('applied'))\n\n    let dateApplied: string\n    let location: string | undefined\n\n    if (appliedIndex !== -1) {\n      // Has \"Applied X ago\"\n      location = appliedIndex > 2 ? parts[2] : undefined\n      const appliedText = parts[appliedIndex]\n      dateApplied = parseRelativeDate(appliedText)\n    } else {\n      // No \"Applied\" text, check if there's a location\n      location = parts.length > 2 ? parts[2] : undefined\n      // Default to today\n      dateApplied = new Date().toISOString().split('T')[0]\n    }\n\n    applications.push({\n      company,\n      position,\n      location,\n      dateApplied,\n      source: 'LinkedIn'\n    })\n  }\n\n  return applications\n}\n\nfunction parseRelativeDate(text: string): string {\n  const today = new Date()\n\n  // Extract number and unit from \"Applied 2 days ago\", \"Applied 1 week ago\", etc.\n  const match = text.match(/(\\d+)\\s*(minute|min|hour|hr|day|week|wk|month|mo)s?\\s*ago/i)\n\n  if (!match) {\n    // Default to today if can't parse\n    return today.toISOString().split('T')[0]\n  }\n\n  const amount = parseInt(match[1])\n  const unit = match[2].toLowerCase()\n\n  let daysAgo = 0\n\n  if (unit.startsWith('min')) {\n    daysAgo = 0 // Same day\n  } else if (unit.startsWith('hour') || unit === 'hr') {\n    daysAgo = 0 // Same day\n  } else if (unit.startsWith('day')) {\n    daysAgo = amount\n  } else if (unit.startsWith('week') || unit === 'wk') {\n    daysAgo = amount * 7\n  } else if (unit.startsWith('month') || unit === 'mo') {\n    daysAgo = amount * 30\n  }\n\n  const appliedDate = new Date(today)\n  appliedDate.setDate(appliedDate.getDate() - daysAgo)\n\n  return appliedDate.toISOString().split('T')[0]\n}\n"],"names":[],"mappings":"AAAA,oEAAoE;;;;;AAU7D,SAAS,mBAAmB,OAAe;IAChD,MAAM,QAAQ,QAAQ,KAAK,CAAC,MAAM,MAAM,CAAC,CAAA,OAAQ,KAAK,IAAI;IAC1D,MAAM,eAAoC,EAAE;IAE5C,KAAK,MAAM,QAAQ,MAAO;QACxB,mCAAmC;QAEnC,4DAA4D;QAC5D,iDAAiD;QACjD,yDAAyD;QAEzD,MAAM,QAAQ,KAAK,KAAK,CAAC,OAAO,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;QAC/C,IAAI,MAAM,MAAM,GAAG,GAAG,UAAS,qCAAqC;QAEpE,MAAM,UAAU,KAAK,CAAC,EAAE;QACxB,MAAM,WAAW,KAAK,CAAC,EAAE;QAEzB,wCAAwC;QACxC,MAAM,eAAe,MAAM,SAAS,CAAC,CAAA,IAAK,EAAE,WAAW,GAAG,QAAQ,CAAC;QAEnE,IAAI;QACJ,IAAI;QAEJ,IAAI,iBAAiB,CAAC,GAAG;YACvB,sBAAsB;YACtB,WAAW,eAAe,IAAI,KAAK,CAAC,EAAE,GAAG;YACzC,MAAM,cAAc,KAAK,CAAC,aAAa;YACvC,cAAc,kBAAkB;QAClC,OAAO;YACL,iDAAiD;YACjD,WAAW,MAAM,MAAM,GAAG,IAAI,KAAK,CAAC,EAAE,GAAG;YACzC,mBAAmB;YACnB,cAAc,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QACtD;QAEA,aAAa,IAAI,CAAC;YAChB;YACA;YACA;YACA;YACA,QAAQ;QACV;IACF;IAEA,OAAO;AACT;AAEA,SAAS,kBAAkB,IAAY;IACrC,MAAM,QAAQ,IAAI;IAElB,gFAAgF;IAChF,MAAM,QAAQ,KAAK,KAAK,CAAC;IAEzB,IAAI,CAAC,OAAO;QACV,kCAAkC;QAClC,OAAO,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IAC1C;IAEA,MAAM,SAAS,SAAS,KAAK,CAAC,EAAE;IAChC,MAAM,OAAO,KAAK,CAAC,EAAE,CAAC,WAAW;IAEjC,IAAI,UAAU;IAEd,IAAI,KAAK,UAAU,CAAC,QAAQ;QAC1B,UAAU,GAAE,WAAW;IACzB,OAAO,IAAI,KAAK,UAAU,CAAC,WAAW,SAAS,MAAM;QACnD,UAAU,GAAE,WAAW;IACzB,OAAO,IAAI,KAAK,UAAU,CAAC,QAAQ;QACjC,UAAU;IACZ,OAAO,IAAI,KAAK,UAAU,CAAC,WAAW,SAAS,MAAM;QACnD,UAAU,SAAS;IACrB,OAAO,IAAI,KAAK,UAAU,CAAC,YAAY,SAAS,MAAM;QACpD,UAAU,SAAS;IACrB;IAEA,MAAM,cAAc,IAAI,KAAK;IAC7B,YAAY,OAAO,CAAC,YAAY,OAAO,KAAK;IAE5C,OAAO,YAAY,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;AAChD","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewscott/Projects/jobtrack/app/api/import/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { parseLinkedInPaste } from '@/lib/parser'\nimport { supabase } from '@/lib/supabase'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { rawText } = await request.json()\n\n    if (!rawText) {\n      return NextResponse.json({ error: 'No text provided' }, { status: 400 })\n    }\n\n    // Parse the LinkedIn paste\n    const parsed = parseLinkedInPaste(rawText)\n\n    if (parsed.length === 0) {\n      console.log('Parse failed. Raw text:', rawText)\n      return NextResponse.json({\n        error: 'No applications found. Format: \"Company - Position - Applied X ago\"',\n        received: rawText.substring(0, 100)\n      }, { status: 400 })\n    }\n\n    // Convert to database format\n    const applications = parsed.map(app => ({\n      company: app.company,\n      position: app.position,\n      location: app.location,\n      date_applied: app.dateApplied,\n      source: app.source,\n      status: 'applied' as const\n    }))\n\n    // For MVP: Return parsed data (client will use localStorage)\n    // Supabase integration can be added later\n    return NextResponse.json({\n      imported: applications.length,\n      applications: applications\n    })\n\n  } catch (error) {\n    console.error('Import error:', error)\n    return NextResponse.json(\n      { error: 'Failed to import applications' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEtC,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,2BAA2B;QAC3B,MAAM,SAAS,IAAA,qIAAkB,EAAC;QAElC,IAAI,OAAO,MAAM,KAAK,GAAG;YACvB,QAAQ,GAAG,CAAC,2BAA2B;YACvC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,OAAO;gBACP,UAAU,QAAQ,SAAS,CAAC,GAAG;YACjC,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,6BAA6B;QAC7B,MAAM,eAAe,OAAO,GAAG,CAAC,CAAA,MAAO,CAAC;gBACtC,SAAS,IAAI,OAAO;gBACpB,UAAU,IAAI,QAAQ;gBACtB,UAAU,IAAI,QAAQ;gBACtB,cAAc,IAAI,WAAW;gBAC7B,QAAQ,IAAI,MAAM;gBAClB,QAAQ;YACV,CAAC;QAED,6DAA6D;QAC7D,0CAA0C;QAC1C,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,UAAU,aAAa,MAAM;YAC7B,cAAc;QAChB;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAgC,GACzC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}